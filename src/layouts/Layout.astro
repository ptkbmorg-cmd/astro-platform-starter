---
import '../../src/styles/globals.css';
import '@fontsource-variable/inter/wght.css';
import interWoff2 from '@fontsource-variable/inter/files/inter-latin-wght-normal.woff2?url';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>{title}</title>
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="preload" as="font" type="font/woff2" href={interWoff2} crossorigin />

    <style is:global>
      :root {
        /* Corporate light palette */
        --kbm-bg: #eef4ff;            /* light bluish background */
        --kbm-surface: #ffffff;       /* card / surface */
        --kbm-text: #0f172a;          /* slate-900 */
        --kbm-muted: #334155;         /* slate-700 */
        --kbm-border: rgba(15, 23, 42, 0.12);
        --kbm-accent: #1d4ed8;        /* blue-700 */
        --kbm-accent-2: #0ea5e9;      /* sky-500 for subtle accents */
      }

      html, body {
        background: var(--kbm-bg) !important;
        color: var(--kbm-text) !important;
      }

      /* Make sure text is readable everywhere */
      h1, h2, h3, h4, h5, h6 { color: var(--kbm-text); }
      p, li, span, div { color: inherit; }

      /* Links */
      a { color: var(--kbm-accent); }
      a:hover { opacity: 0.92; }

      /* Buttons (override DaisyUI/Template pink) */
      .btn {
        background: var(--kbm-accent) !important;
        border-color: var(--kbm-accent) !important;
        color: #ffffff !important;
      }
      .btn:hover { filter: brightness(0.95); }

      /* Soft cards if you add class kbm-card anywhere */
      .kbm-card {
        background: var(--kbm-surface);
        border: 1px solid var(--kbm-border);
        border-radius: 16px;
      }

      /* Improve focus style (accessibility) */
      a:focus-visible, button:focus-visible {
        outline: 3px solid rgba(29, 78, 216, 0.35);
        outline-offset: 2px;
        border-radius: 10px;
      }

      /* Floating WhatsApp button */
      .wa-float {
        position: fixed;
        right: 18px;
        bottom: 18px;
        width: 52px;
        height: 52px;
        border-radius: 999px;
        display: grid;
        place-items: center;
        background: #16a34a; /* WhatsApp-ish green */
        color: #ffffff;
        box-shadow: 0 10px 20px rgba(15, 23, 42, 0.20);
        border: 1px solid rgba(255, 255, 255, 0.25);
        z-index: 60;
        transition: transform 0.15s ease, filter 0.15s ease;
      }

      .wa-float:hover {
        transform: translateY(-2px);
        filter: brightness(0.97);
      }

      .wa-float:active {
        transform: translateY(0px);
      }

      @media (min-width: 640px) {
        .wa-float {
          right: 22px;
          bottom: 22px;
        }
      }
    </style>
  </head>

  <body class="antialiased">
    <div class="min-h-screen px-6 sm:px-12" style="background: var(--kbm-bg);">
      <div class="flex flex-col w-full max-w-5xl mx-auto min-h-screen">
        <Header />
        <main class="grow" style="color: var(--kbm-text);">
          <slot />
        </main>
        <Footer />
      </div>
    </div>

    <!-- Floating WhatsApp CTA (always visible on all pages) -->
    <a
      href="https://wa.me/62817732551?text=Halo%20PT%20Khasana%20Berkah%20Mandiri,%20saya%20ingin%20konsultasi%20terkait%20layanan%20instalasi%20dan%20maintenance%20yang%20Anda%20tawarkan."
      target="_blank"
      rel="noopener noreferrer"
      class="wa-float"
      aria-label="Chat via WhatsApp"
      title="Chat via WhatsApp"
    >
      <!-- WhatsApp icon (inline SVG) -->
      <svg
        viewBox="0 0 32 32"
        width="22"
        height="22"
        aria-hidden="true"
        focusable="false"
      >
        <path
          fill="currentColor"
          d="M19.11 17.53c-.27-.14-1.6-.79-1.85-.88-.25-.09-.43-.14-.61.14-.18.27-.7.88-.86 1.06-.16.18-.31.2-.58.07-.27-.14-1.15-.42-2.19-1.34-.81-.72-1.36-1.6-1.52-1.87-.16-.27-.02-.42.12-.55.12-.12.27-.31.41-.47.14-.16.18-.27.27-.45.09-.18.05-.34-.02-.47-.07-.14-.61-1.47-.84-2.01-.22-.53-.45-.46-.61-.47l-.52-.01c-.18 0-.47.07-.72.34-.25.27-.95.93-.95 2.27s.98 2.64 1.12 2.82c.14.18 1.93 2.95 4.67 4.14.65.28 1.16.45 1.56.57.66.21 1.26.18 1.73.11.53-.08 1.6-.65 1.82-1.28.22-.63.22-1.17.16-1.28-.06-.11-.25-.18-.52-.32zM16 3C8.83 3 3 8.83 3 16c0 2.31.61 4.57 1.77 6.56L3.6 28.6l6.22-1.14A12.94 12.94 0 0 0 16 29c7.17 0 13-5.83 13-13S23.17 3 16 3zm0 23.63c-2.03 0-4.02-.54-5.75-1.56l-.41-.24-3.69.68.68-3.6-.27-.43A10.57 10.57 0 0 1 5.37 16C5.37 10.31 10.31 5.37 16 5.37S26.63 10.31 26.63 16 21.69 26.63 16 26.63z"
        />
      </svg>
    </a>
  </body>
</html>
